{
  "metadata": {
    "generated_at": "2026-01-17",
    "updated_at": "2026-01-17",
    "total_errors": 22,
    "critical": 5,
    "high": 6,
    "medium": 6,
    "low": 5
  },
  "errors": [
    {
      "id": 1,
      "severity": "CRITICAL",
      "file": "engine/config.py",
      "line": 73,
      "type": "CONFIG_ERROR",
      "title": "LOTO4 max=25 incorrecto",
      "description": "LOTO4 usa numeros del 1 al 41, no del 1 al 25. El valor max=25 limita incorrectamente el rango de predicciones.",
      "impact": "Predicciones de LOTO4 limitadas al rango incorrecto, nunca predecira numeros 26-41",
      "fix": "Cambiar 'max': 25 a 'max': 41",
      "status": "NOT_AN_ERROR",
      "notes": "LOTO4 realmente usa max=25. El reporte original era incorrecto."
    },
    {
      "id": 2,
      "severity": "CRITICAL",
      "file": "engine/models/oraculo_neural.py",
      "line": 31,
      "type": "CONFIG_ERROR",
      "title": "Duplicado: LOTO4 max=25 hardcodeado",
      "description": "El mismo error de LOTO4 max=25 esta duplicado en el oraculo neural, causando que el ML entrene con rango incorrecto.",
      "impact": "Modelo ML entrenado con rango incorrecto para LOTO4",
      "fix": "Cambiar 'max': 25 a 'max': 41 o usar config centralizada",
      "status": "NOT_AN_ERROR",
      "notes": "LOTO4 realmente usa max=25. El reporte original era incorrecto."
    },
    {
      "id": 3,
      "severity": "CRITICAL",
      "file": "engine/scrapers/scraper_maestro.py",
      "line": "39-44",
      "type": "IMPORT_ERROR",
      "title": "exit() sin fallback graceful",
      "description": "Si los archivos loto_parser_v3.py o loto_parsers_mix.py no existen, el script ejecuta exit() inmediatamente sin permitir recuperacion.",
      "impact": "Script completamente inutilizable si faltan archivos de parsers",
      "fix": "Agregar manejo de error graceful o crear parsers faltantes",
      "status": "FIXED"
    },
    {
      "id": 4,
      "severity": "CRITICAL",
      "file": "engine/models/meta_learner.py",
      "line": 85,
      "type": "IMPORT_ANTIPATTERN",
      "title": "import math dentro de funcion",
      "description": "El import de math se hace dentro del metodo predecir_confianza_real() en lugar de estar al inicio del archivo.",
      "impact": "Overhead de performance en cada llamada, riesgo de ImportError no previsto en runtime",
      "fix": "Mover 'import math' al inicio del archivo junto con los otros imports",
      "status": "FIXED"
    },
    {
      "id": 5,
      "severity": "CRITICAL",
      "file": "engine/models/bot_dreamer.py",
      "line": "393-406",
      "type": "VARIABLE_ERROR",
      "title": "Variables incorrectas en bloque ML",
      "description": "El bloque del Oraculo Neural usaba variables que no existian en ese contexto: top_consenso, objetivo_sorteo, confianza_final.",
      "impact": "Error 'cannot access local variable objetivo_sorteo' al ejecutar",
      "fix": "Ya corregido - usar pred_ml, objetivo, ganador_ml['score']",
      "status": "FIXED"
    },
    {
      "id": 6,
      "severity": "HIGH",
      "file": "engine/models/bot_dreamer.py",
      "line": 415,
      "type": "LOGIC_ERROR",
      "title": "Logica invertida de pesos DISIDENTE vs NORMAL",
      "description": "Los predicadores DISIDENTES tienen peso 8, mientras que NORMAL tiene peso 5. Deberia ser al reves - las predicciones normales deberian tener mas peso.",
      "impact": "Sesgo sistematico favoreciendo predicciones divergentes sobre las normales",
      "fix": "Invertir valores: NORMAL=8, DISIDENTE=5",
      "status": "FIXED"
    },
    {
      "id": 7,
      "severity": "HIGH",
      "file": "engine/models/bot_dreamer.py",
      "line": "515-520",
      "type": "RACE_CONDITION",
      "title": "Race condition en escritura de archivos JSON",
      "description": "El loop escribe multiples archivos JSON en la cola sin sincronizacion. Si consolidar_cola.py ejecuta simultaneamente, puede leer archivos parcialmente escritos.",
      "impact": "Corrupcion de datos en situaciones de concurrencia",
      "fix": "Implementar file locking o escritura atomica",
      "status": "FIXED"
    },
    {
      "id": 8,
      "severity": "HIGH",
      "file": "engine/models/entrenador_cognitivo.py",
      "line": "306-325",
      "type": "RACE_CONDITION",
      "title": "Race condition en actualizacion de genoma",
      "description": "Si dos procesos entrenadores corren simultaneamente, ambos cargan el mismo genoma, entrenan, y uno sobrescribe los cambios del otro.",
      "impact": "Perdida de aprendizaje incremental en ejecuciones concurrentes",
      "fix": "Implementar mutex o file locking en escritura de genoma",
      "status": "PARTIAL",
      "notes": "Escritura atomica implementada. Para mutex completo se requiere file locking adicional."
    },
    {
      "id": 9,
      "severity": "HIGH",
      "file": "index.html",
      "line": "8-12",
      "type": "DEPENDENCY_ERROR",
      "title": "CDNs externos sin fallback local",
      "description": "El dashboard carga Lucide icons, Swiper y Google Fonts desde CDNs externos sin fallback local.",
      "impact": "Dashboard completamente roto si no hay conexion a internet o si los CDNs fallan",
      "fix": "Agregar bundle local de Lucide y Swiper como fallback",
      "status": "PENDING",
      "notes": "Requiere trabajo frontend para bundle local de assets"
    },
    {
      "id": 10,
      "severity": "HIGH",
      "file": "engine/scrapers/scraper_maestro.py",
      "line": 51,
      "type": "EXTERNAL_DEPENDENCY",
      "title": "URL Google Sheets sin validacion",
      "description": "La URL de Google Sheets esta hardcodeada. Si el documento se elimina o se cierra el sharing, la sincronizacion falla silenciosamente.",
      "impact": "Sincronizacion de jugadas externas falla sin notificacion clara",
      "fix": "Agregar validacion de respuesta y notificacion de error",
      "status": "FIXED"
    },
    {
      "id": 11,
      "severity": "HIGH",
      "file": "engine/models/generador_biometrico.py",
      "line": 127,
      "type": "TYPE_ERROR",
      "title": "Conversion de tipo insegura",
      "description": "La expresion int(x) if x >= min_num asume que x es numerico, pero si x es string, la comparacion >= fallara.",
      "impact": "ValueError no manejado si hay datos malformados en CSV",
      "fix": "Agregar try/except o validacion de tipo antes de comparar",
      "status": "FIXED"
    },
    {
      "id": 12,
      "severity": "MEDIUM",
      "file": "engine/config.py",
      "line": "100-105",
      "type": "MAINTAINABILITY",
      "title": "Horarios de sorteos hardcodeados",
      "description": "Los horarios de sorteos estan hardcodeados en el codigo. Si la Polla Chilena cambia horarios, no hay forma de actualizar sin editar codigo.",
      "impact": "Predicciones futuras seran incorrectas si cambian horarios oficiales",
      "fix": "Mover horarios a archivo de configuracion externo o base de datos",
      "status": "PENDING",
      "notes": "Refactor estructural, no critico actualmente"
    },
    {
      "id": 13,
      "severity": "MEDIUM",
      "file": "engine/models/bot_dreamer.py",
      "line": 312,
      "type": "POTENTIAL_ERROR",
      "title": "Variable adn_info potencialmente no inicializada",
      "description": "La variable adn_info se define dentro de un condicional pero se usa en f-string que puede ejecutarse aunque no se haya inicializado.",
      "impact": "NameError posible si la logica del condicional cambia",
      "fix": "Inicializar adn_info con valor por defecto antes del condicional",
      "status": "FIXED",
      "notes": "La variable ya estaba inicializada correctamente en linea 286"
    },
    {
      "id": 14,
      "severity": "MEDIUM",
      "file": "engine/tools/consolidar_cola.py",
      "line": "~102",
      "type": "TIMEOUT_ERROR",
      "title": "FileLock timeout=30s muy corto",
      "description": "El timeout de 30 segundos para el file lock puede ser insuficiente si el entrenador esta procesando muchos datos.",
      "impact": "Perdida de predicciones si el consolidador hace timeout esperando el lock",
      "fix": "Aumentar timeout a 120s o implementar retry logic",
      "status": "FIXED"
    },
    {
      "id": 15,
      "severity": "MEDIUM",
      "file": "engine/models/juez_implacable.py",
      "line": 49,
      "type": "FRAGILE_CODE",
      "title": "Triple conversion anidada",
      "description": "La expresion str(int(float(row['sorteo']))) hace tres conversiones anidadas. Si row['sorteo'] es string invalido, falla en int().",
      "impact": "Fila malformada detiene toda la auditoria",
      "fix": "Agregar try/except y continuar con siguiente fila si hay error",
      "status": "FIXED"
    },
    {
      "id": 16,
      "severity": "MEDIUM",
      "file": "engine/models/oraculo_neural.py",
      "line": 276,
      "type": "LOGIC_ERROR",
      "title": "Threshold de alerta contradictorio",
      "description": "La condicion train_score > 0.5 con test_score < 0.15 indica overfitting severo, pero el mensaje solo dice 'posible'. Para loteria, train > 0.5 ya es sospechoso.",
      "impact": "Falsa sensacion de seguridad en modelo inestable",
      "fix": "Cambiar threshold o mejorar mensaje de advertencia",
      "status": "FIXED"
    },
    {
      "id": 17,
      "severity": "MEDIUM",
      "file": "engine/models/loto3_tricore.py",
      "line": 47,
      "type": "DEAD_CODE",
      "title": "Asignacion vacia que no hace nada",
      "description": "La linea col_name = col_name asigna la variable a si misma sin hacer ninguna transformacion.",
      "impact": "La correccion de columnas 'sucias' nunca ocurre, puede causar KeyError",
      "fix": "Implementar la correccion real o eliminar la linea",
      "status": "FIXED"
    },
    {
      "id": 18,
      "severity": "LOW",
      "file": "engine/models/bot_dreamer.py",
      "line": 433,
      "type": "REDUNDANT_CODE",
      "title": "Condicion siempre verdadera",
      "description": "La condicion 'if objetivo:' verifica una variable que ya fue asignada con garantia en linea 257.",
      "impact": "Codigo redundante que dificulta mantenimiento",
      "fix": "Eliminar la condicion innecesaria",
      "status": "FIXED"
    },
    {
      "id": 19,
      "severity": "LOW",
      "file": "engine/models/entrenador_cognitivo.py",
      "line": 272,
      "type": "REDUNDANT_CODE",
      "title": "Condicion innecesaria len(nums) > 1",
      "description": "La condicion if len(nums) > 1 siempre es verdadera para todos los juegos (LOTO tiene 6, LOTO3 tiene 3, etc).",
      "impact": "Codigo confuso que no agrega valor",
      "fix": "Eliminar la condicion o documentar su proposito",
      "status": "FIXED",
      "notes": "Condicion eliminada con comentario explicativo agregado"
    },
    {
      "id": 20,
      "severity": "LOW",
      "file": "engine/models/entrenador_cognitivo.py",
      "line": 320,
      "type": "ANTIPATTERN",
      "title": "Uso de locals() como antipatron",
      "description": "La expresion if 'tmp_path' in locals() usa locals() que no siempre funciona como se espera y es considerado antipatron.",
      "impact": "Riesgo potencial de fuga de archivo temporal",
      "fix": "Inicializar tmp_path = None antes del try y verificar if tmp_path",
      "status": "FIXED"
    },
    {
      "id": 21,
      "severity": "LOW",
      "file": "varios",
      "line": "-",
      "type": "INCONSISTENCY",
      "title": "Nombres de algoritmos inconsistentes",
      "description": "Algunos lugares usan gaussiano_inteligente mientras otros usan gaussiano_tactico. No hay consistencia en nomenclatura.",
      "impact": "Confusion en tracking y debugging",
      "fix": "Estandarizar nombres de algoritmos en todo el proyecto",
      "status": "PENDING",
      "notes": "Requiere analisis exhaustivo del codebase para unificar nombres"
    },
    {
      "id": 22,
      "severity": "LOW",
      "file": "varios",
      "line": "-",
      "type": "INCONSISTENCY",
      "title": "Prefijos de columnas CSV inconsistentes",
      "description": "LOTO usa prefijo LOTO_n para columnas, mientras LOTO3/LOTO4 usan solo n. Esto agrega complejidad innecesaria al codigo.",
      "impact": "Complejidad adicional en parsers y procesamiento",
      "fix": "Estandarizar prefijos o documentar claramente las diferencias",
      "status": "PENDING",
      "notes": "Cambio estructural que afecta datos existentes"
    }
  ],
  "summary": {
    "by_type": {
      "CONFIG_ERROR": 2,
      "IMPORT_ERROR": 1,
      "IMPORT_ANTIPATTERN": 1,
      "VARIABLE_ERROR": 1,
      "LOGIC_ERROR": 2,
      "RACE_CONDITION": 2,
      "DEPENDENCY_ERROR": 1,
      "EXTERNAL_DEPENDENCY": 1,
      "TYPE_ERROR": 1,
      "MAINTAINABILITY": 1,
      "POTENTIAL_ERROR": 1,
      "TIMEOUT_ERROR": 1,
      "FRAGILE_CODE": 1,
      "DEAD_CODE": 1,
      "REDUNDANT_CODE": 2,
      "ANTIPATTERN": 1,
      "INCONSISTENCY": 2
    },
    "by_file": {
      "engine/config.py": 2,
      "engine/models/oraculo_neural.py": 2,
      "engine/scrapers/scraper_maestro.py": 2,
      "engine/models/meta_learner.py": 1,
      "engine/models/bot_dreamer.py": 4,
      "engine/models/entrenador_cognitivo.py": 3,
      "index.html": 1,
      "engine/models/generador_biometrico.py": 1,
      "engine/tools/consolidar_cola.py": 1,
      "engine/models/juez_implacable.py": 1,
      "engine/models/loto3_tricore.py": 1,
      "varios": 2
    },
    "fixed": 16,
    "partial": 1,
    "pending": 3,
    "not_an_error": 2
  }
}
